let axios=require("axios"),moment=require("moment"),fs=require("fs");class KeyManager{static LOG_DIR=__dirname+"/logs";static async log(a,e){try{var r=moment().format("YYYY-MM-DD"),t=`${r} ${a.toUpperCase()} ${e}\n`,s=(fs.existsSync(this.LOG_DIR)||fs.mkdirSync(this.LOG_DIR),this.LOG_DIR+`/log-${r}.log`);return fs.appendFileSync(s,t),console.log("KeyManager: Log salvo com sucesso",t),{log:"save"}}catch(a){return console.error("KeyManager: Erro ao salvar o log",a.message),{log:"error"}}}static async validate(a,e=""){try{var r=await axios.post(e,a),{valid:t,details:s,expired_at:o}=r.data;return""===e?{valid:!1,expired_at:"00/00/0000",details:"URL n√£o informada",data:{}}:{valid:t,expired_at:moment(o).toISOString(),details:s,data:r.data}}catch(a){return{valid:!1,expired_at:"00/00/0000",details:a.message,data:{}}}}static checkDataJson(a){try{return JSON.stringify(a)}catch(a){return console.error("KeyManager: Erro ao validar os dados enviados",a.message),null}}}module.exports=KeyManager;